# 1일차

## 팀빌딩

오늘은 각자 어떤 개인앱 프로젝트를 할지에 관하여 이야기 해보는 시간을 가졌다. (오랜만이라 첨에 살짝 어색..)

나를 포함한 대부분의 팀원들은 아직 구체적으로 어떤앱을 만들어야 할지 정하지 못하여 구체적인 계획 등은 없는 상태였다.

팀원 중 한명은 과제로 나왔던 EmotionDiary에 Calendar등 추가 기능을 구현하여 만들어 본다고 한다.

### 그래서 나는?

나의 경우 book api를 활용 하여, 자신이 읽은 책을 등록 하고 짧막한 독서감상문? 리뷰? 등을 정리 해놓는 앱을 생각 중이다.

여러 유사한 앱을 찾아본 결과 백업/복구, 등록한 도서 검색(제목 or 글쓴이 or 자신의감상평) 등이 빠져 있다. 이 기능은 꼭 넣어야 할듯..?

오늘은 사용 할 API에 대해서 검색해 보고, 어떤 API가 가장 알맞을지 먼저 생각해보는 시간을 가져야 겠다.

## 개인학습

사용 가능한 API가 네이버/카카오 등 종류가 많다. book API 종류 별로 특징을 정리해 놓은 블로그를 참조하여 정리해보았다.

### 네이버


|구분|내용|
|:---|:---|
|호출 건수|하루 2만5천 건|
|검색 조건	|전체, 제목, 저자, 목차, ISBN, 출판사, 출간시작일, 출간종료일, 카테고리
|정렬 순서	|유사도순, 출간일순, 판매량순
|출력 형식	|XLM, JSON
|출력 데이터|제목, 도서 상세 URL, 표지 이미지, 저자, 가격, 출판사, ISBN, 요약, 출간일

네이버의 경우 사용법도 간단하고, 일일 검색 제한량도 25000으로 크다. (물론 나랑은 크게 상관 없을듯?)

카테고리를 제공하지 않는 단점이 있지만 줄거리,제목,저자,이미지 등 내가 만들고자 하는 앱에 필요한 정보는 충분 하다.

다만, 제공되는 이미지 사이즈가 (82x116)로 너무 작다.

### 카카오

구분|내용
|:---|:---|
|호출 건수	|하루 3만 건
|검색 조건	|전체, 제목, ISBN, 출판사, 저자
|정렬 순서	|정확도순, 최신순
|출력 형식	|JSON
|출력 데이터 | 제목, 소개, 도서 상세 URL, ISBN, 출간일, 출판사, 저자, 역자, 가격, 표지 이미지(120x174), 판매 상태

카카오의 경우도 사용법이 간단하며, 카테고리를 제공하지 않는 단점이 있다.

허나, 제공되는 이미지 사이즈가 네이버(82x116) 보다 큰(120x174) 를 제공한다.

### 알라딘

|구분|내용
|:---|:---|
|호출 건수|하루 5천 건
|검색 조건	|제목, 저자, 출판사, 전체(제목+저자)
|정렬 조건	|정확도, 출간일, 제목, 판매량, 고객평점, 마이리뷰갯수
|출력 형식	|XLM, JSON
|출력 데이터|	제목, 도서 상세 URL, ISBN, 상품설명, 도서출간일, 상품가격, 표지이미지, 카테고리, 출판사, 고객평점

제공되는 데이터가 카카오/네이버에 비해 많다. 때문에 사용법도 상대적으로 까다롭다. 또한 일일 호출 횟수가 5천건으로 많이 낮은편.

이밖에 공공데이터API와 인터파크API도 있다. 하지만 공공데이터는 xml이기 때문에 탈락했고(이 기회에 써보는 것도 나쁘진 않지만 다음으로 미루자!)

인터파크는 요즘 관리를 안한다는 말이 있어서 후보에서 뺐다.

일단 현재로선 카카오 API가 알맞을 것 같다.(네이버는 이미지 해상도가 너무 낮고, 알라딘은 일일 호출 횟수가 낮다)

카카오 북 api테스트 하는데 인증이 안되서 놀랐는데 앞에 KakaoAK 를 또 까먹었다ㅠ 이젠 까먹지말자

-------------------------------------

# 2일차

## 팀빌딩

오늘은 각자 만들어볼 개인 프로젝트에 대해 이야기 하고, 어떤 내용을 공부 했는지 발표해 보았다.

API를 사용하는 사람들은 나처럼 사용 할 API에 관해 많이 찾아본 것 같았다.

아직까지 다들 머릿속에 만들앱에 대해 정립이 안되어 있는 경우가 많아서 많은 내용을 발표한 것은 아니지만

어느정도 자신의 방향성은 잡힌 듯 한 모습이다.(난 아닌거 같기도)

아직까진 시작 단계라 잘 모르겠으나, 가면 갈수록 팀원들이 서로 공유해주는 것 들이 많은 참고가 될 것 같다.

지금 적고 있는 README도 팀원중 한명이 공유해 주어서, git 대문에 깔끔하게 주차별 표로 정리할 수 있었다.

내일은 오늘 작성한 대쉬보드를 보며 한번 더 발표 할 것 같다.

## 개인 학습

카카오 오븐을 이용하여 기획에서 들어 갈 대쉬보드를 만들었다.

[기획서_화면구현](./project_plan.md#1-메인)

--------------------------------------

# 3일차

## 팀빌딩

오늘은 각자 작성한 기획서를 공유 해보았다.

나를 포함하여 전부 100프로 완성된 기획서는 아니었으나, 화면 구성 및 일정 등 어느정도 정리가 된 상태였다.

기획서를 만들면서 "아 이거나 할 수 있나?" 라는 생각을 많이 하게 되었는데, 팀원들도 비슷한 생각인가부다.(먼가 약간 안심되는?ㅋㅋ)

팀원 중 한명은 json이 아닌 xml을 이용하여 데이터를 받아오신다고 한다. 나도 예전에 공공테이터를 이용한 웹을 만들때 써보긴 했으나

너무 오래되서 별로 도움은 되지 못했다ㅠ 기억나는건 체감되는 속도 정도(xml은 포맷형식 때문인지 좀 느리다)

내일은 진짜 발표다. 우리팀은 다 잘하셔서 나만 잘하면 될 것 같다.

## 개인 학습

어제 카카오 오븐으로 만든 대쉬보드와 오늘 만든 일정과 기술스택 항목을 넣어서 기획서를 만들었다.

생각했던 대로 일정 짜기가 쉽지 않다. 아니, 일정은 짜겠는데 개발항목당 소요시간이 예상이 안된다.

"처음이니까 괜찮괜찮" 이라고 긍정적으로 생각해본다..ㅋ

[기획서](./project_plan.md)

# 4일차

## 팀빌딩

오늘은 기획서 발표 1일차 였는데 사다리 타기로 우리 팀은 4번째로 발표하게 되었다.

팀원들과 기획서 내용을 공유하며 발표식으로 얘기해본게 도움이 되었는지 무난하게 잘 넘어간 것 같다.

우리 팀원들도 전부 잘했는데, 얼마 안되었지만 나도 모르게 소속감이 생겼는지 팀원들 내용은 더 집중해서 보게 되었다.

발표가 끝나고 끝난 후기와 함께 오늘 할 것에 대해 자유롭게 대화했다.

먼가 "나잘함" 의 포스가 느껴지는 팀원 한분은 Assets font등을 이미 하였다고 한다.

나도 천천히 밑그림 작업부터 들어가 봐야겠다. 

## 개인 학습

font,assets을 설정하고 메인화면 스토리보드를 구성했다.

시작부터 작은 실수가 하나 있었다.(아주멍청;)

상단에 scopebar가 아닌 segmented control을 넣어야 하는데 모양이 비슷하다는 이유로

자꾸 상단에 scopebar를 넣을려고 했다. scopebar는 searchbar에 포함되어있어서 따로 쓸 수는 없다.

근데 그걸 억지로 searchBar에 있는 textfield를 hidden 처리 하여 사용할려하다가 

문듯 내가 뭔가 잘못 알고 있다는 사실을 상기하고 다시 잘 찾아본 결과 segmented control을 사용해야 한다는 것을 알았다.

분명 배웠던 내용인데 가볍게 넘어간 탓이 분명하다ㅠㅠ

# 5일차

## 팀빌딩

다들 차근차근 기초공사를 시작한 느낌이다. 근데 뭔가 아직 프로젝트를 시작했다는게 체감이 안되는 느낌..? 나만그런가

대부분 View 구성을 시작 하였거나, 가장 중요하다고 느끼는 기술스택에 대한 공부를 이어가고 있는것 같다.

자꾸 느긋 해지는 것에대해 팀원들과도 얘기 했는데, 공감해주셔서 기분좋았다.

주말 동안 각자 열심히 하고 월요일에 다시 팀빌딩을 하게될땐, 이런저런 이야기가 더 많이 나올 것 같다.

## 개인 학습

어제 다 하지 못한 View 구성을 하였다. 어제에 이어 스토리보드와 controller를 연결해놓았고, 기초 UI를 구현했다.

네비게이션 컨트롤러를 활용해 화면 이동 또한 어느정도 해놨으나, 추후에 데이터 이동이 필요하므로 추가적인 구현이 필요하다.

내가 만드는 앱이 이전에 나왔던 과제를 참조하여 구현 할 수 있어서, 지금까진 큰 문제는 없다.

다만 컬렉션뷰와 테이블뷰에 CRUD를 구현 했을 떄, 저번 과제때 아주 좋지 않은 기억이 있으므로 (cell을 구성하는 조건문부터 완전히 틀려먹었었다!!)

이번엔 제발 실수 없이 기초부터 차근차근 꼼꼼하게 보아야겠다.

# 6일차

## 개인 학습

백업/복구 및 라이센스 화면을 제외하고 View를 구현하였다. 끝냈다는 표현은 맞지 않고, 레이아웃과 기본구성 등을 했다는게 맞는 것 같다.

IQKeyBoardManager 와 SideMenu 라이브러리를 연동하여 테스트 해봤는데 다행히 큰문제 없이 해결 되었다.

단,SideMenu가 appear 되고 나면 이전 화면이 약간 어두워 지는 그림을 생각 했는데 생각보다 쉽지 않은 것 같다.

delegate를 상속 받아서 생명주기를 알아낼 수 있는데 활용을 해볼수 있도록 해봐야 겠다.(일단 시간이 여유롭지 않으니 미루자)

```swift
extension MainViewController: SideMenuNavigationControllerDelegate {

    func sideMenuWillAppear(menu: SideMenuNavigationController, animated: Bool) {
        print("SideMenu Appearing! (animated: \(animated))")
    }

    func sideMenuDidAppear(menu: SideMenuNavigationController, animated: Bool) {
        print("SideMenu Appeared! (animated: \(animated))")
    }

    func sideMenuWillDisappear(menu: SideMenuNavigationController, animated: Bool) {
        print("SideMenu Disappearing! (animated: \(animated))")
    }

    func sideMenuDidDisappear(menu: SideMenuNavigationController, animated: Bool) {
        print("SideMenu Disappeared! (animated: \(animated))")
    }
}
```

그리고 static tableview를 스토리보드로 구현하려고 했는데, 이게 맨날 dynamic으로 구현하다보니 오히려 static으로 구현이 힘들었다.

그래서 그냥 하던 방식인 dynamic으로 구현 했는데, 책 상세보기 화면에 있는 4개의 cell이 전부 다르기 때문에 cell 파일만 4개가 늘었다.

또다른 방법으로 tableview를 사용하지 않고 scrollview안에 구현하는 방법이 있는데 개인적으로 layout편의상 tableview가 편한 것 같다.

내일 목표는 본격적으로 CRUD를 위해 DB스키마를 만들고, realm에 임의의 데이터를 넣은뒤 tableview collectionview에 연결 하는 것!

(그래도 주말인데 쉬엄쉬엄 하자.. 라고할뻔 내 실력에 천천히 하다간 망한다!)

# 7일차

## 개인 학습

오늘은 카카오 Book API를 연동하고, 책 추가화면에서 검색 데이터를 이용하여 tableView를 구현하였다.

카카오 검색 API는 url에 검색할 타이틀을 기입하는데 ex) https://dapi.kakao.com/v3/search/book?query=해리포터

아래와 같이 한글은 인코딩 과정을 거쳐야 했다.

```swift
let urlString = "https://dapi.kakao.com/v3/search/book?target=title&query=\(title)&page=\(page)&size=10"
let encodedString = urlString.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)!
let url = URL(string: encodedString)!
```

처음에 계속 invalidURL 오류가 떠서 엄청 당황했다ㅠ 까먹지 말고 기억하자

받아온 데이터로 tableView를 생성하는 것 까진 무리없이 하였으나, 몇가지 문제가 있었다.

### 1. 글쓴이가 2명 이상 혹은 없음

   아무 생각 없이 글쓴이 데이터를 .stringValue로 변환하였는데 빈값이 반환되었다.
    
   이유를 찾아보니, 글쓴이는 2명 이상 일 수 있어서 array값을 반환했다.
    
   그래서 글쓴이가 2명 이상이라면 콤마(,) 를 붙여서 하나의 string값으로 만들어 주었다.
    
   근데 테스트도중 이번엔 글쓴이가 없는 경우가 있었다.
    
   반복문을 통해 글쓴이 들을 하나의 string으로 만들어 주려했는데 이렇게 되면 오류가 발생하였다.
    
   count가 0 경우를 따로 상위 조건으로 빼서 "알수 없음" 이라는 값을 넣어주어 해결했다.
    
   사실 올바른 방법인진 모르겠지만 일단 잘되니 패스!!
    
   ```swift
   if item["authors"].count == 0 {
                       authors = "알수 없음"
                   }
                   else {
                       for i in 0...item["authors"].count - 1{
                           if i == 0 {
                               authors = authors + "\(item["authors"][i])"
                           }
                           else{
                               authors = authors + ",\(item["authors"][i])"
                           }
                       }
                   }
   }
   ```
    

### 2. 받아온 썸네일 url이 유효하지 않을 경우

   이것도 처음에 당황하였으나, 저번에 배웠던 kingfisher의 placeholder 옵션을 이용하여 해결 하였다
   
   ```swift
   
   cell.bookCoverImage.kf.setImage(with: url,placeholder: UIImage(named: "noimg"))
   
   ```
    
### 3. UITableViewDataSourcePrefetching 동작

   오늘 하루 가장 멍청한 짓 이었다.
   
   카카오 api는 남은 데이터가 있는지의 여부를 true/false로 알려준다.
   
   따라서 남은 데이터가 있는지 and 현재 마지막 cell인지의 의 조건을 이용하여 구현은 어렵지 않았다.
   
   근데 계속 호출이 안되는거다. 아무리 print를 열심히 찍어도 호출자체가 안되니 1시간동안 답답했다.
   
   그러다 여러 예시들을 찾아보던 도중 "아..또 그거야?" 라는 소리를 하게만든 한줄
   
   ```swift
   searchTableView.prefetchDataSource = self
   ```
   
   그렇다... 맨날 까먹고 실수 하는 delegate 와 datasource가 다시 한번 날 힘들게 하였다.
   
   사실 UITableViewDataSourcePrefetching에 datasource 필요하다는 자체를 모르고 있었다.
   
   분명 수업때 배운 내용인데 놓치고 있었던...ㅠㅠㅠㅠ
